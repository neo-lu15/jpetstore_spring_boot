version: '3.8'

services:
  keycloak:
    container_name: keycloak
    build: keycloak
    ports:
      - 8180:8080
    networks:
      - sso

  openldap:
    image: osixia/openldap:latest
    container_name: openldap
    environment:
      - LDAP_ORGANISATION="Jpetstore"
      - LDAP_DOMAIN=example.org
    ports:
      - "389:389"
    networks:
      - sso

  phpldapadmin:
    image: osixia/phpldapadmin:latest
    container_name: phpldapadmin
    environment:
      - PHPLDAPADMIN_LDAP_HOSTS=openldap
    ports:
      - "6443:443"
    depends_on:
      - openldap
    networks:
      - sso
networks:
  sso:
    name: jpet
